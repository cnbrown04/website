'use client'

import { motion, type SVGMotionProps, type Variants } from 'motion/react'
import { cn } from '@/lib/utils'

// Path 1 is your first trace, Path 2 is the one you just sent.
const PATHS = [
  "m 210.68775,197.095 c 9.75007,-12.90522 19.52466,-24.70239 28.53673,-39.03097 10.73313,-13.22119 17.63335,-24.43575 22.57464,-38.975 3.51718,-19.0341 -29.88722,6.04124 -42.94494,14.70548 -20.02737,17.8802 -42.3204,31.49681 -60.52749,49.12734 -17.00614,16.3984 -31.43668,30.35453 -47.61824,49.28524 -9.24289,14.41209 -22.891879,32.36895 -16.321441,49.45612 12.211231,15.82879 32.211071,7.122 49.345291,1.16649 22.38815,-8.68265 42.96562,-25.63861 68.64244,-33.08055 15.3356,-3.8143 1.04515,10.29363 -6.09035,10.76841 16.13814,-6.69108 36.63046,-18.25291 54.63965,-30.62834 18.37998,-12.54749 24.091,-15.44217 43.70329,-27.37575 19.43396,-13.025 43.44206,-26.74018 61.49899,-35.7199 31.59702,-16.22663 56.19855,-33.12583 86.62828,-47.86331 23.46301,-12.86547 41.57715,-24.201484 69.11335,-35.893478 6.04545,-3.907486 48.76849,-28.407258 27.12935,-18.538762 -15.35743,7.429593 -29.00792,13.244704 -47.4736,21.23533 -7.16699,5.196709 -46.92092,22.60736 -76.01237,38.3948 -25.28879,13.70637 -35.78089,18.90204 -50.86824,28.43886 -19.74666,11.08913 -31.45413,18.78233 -48.42067,31.13429 -18.82027,12.60004 -27.86731,20.88507 -42.40159,30.99296 -14.69393,12.66 -33.62405,23.05473 -36.05777,36.87483 1.4764,11.86382 36.66623,-5.42257 52.43724,-8.5194 7.10457,-2.78795 39.16072,-12.71317 13.26501,3.77844 16.79969,-7.18128 26.09863,0.60061 63.78203,-19.61568 23.04603,-9.57233 40.93211,-18.12977 63.23672,-29.27181 12.99531,-6.33106 36.03159,-12.57069 53.18609,-15.25923",
  "m 572.59494,99.290852 c -7.43226,17.105498 -15.64446,34.787878 -27.59763,51.668408 -10.4062,16.34485 -22.71036,26.95538 -37.81125,42.254 -11.96857,9.13326 -27.28098,25.52319 -44.04172,17.87865 -2.11445,-8.71998 2.49617,-17.97176 8.56686,-30.88167 14.18302,-17.82133 27.95406,-36.57754 47.82405,-50.91853 16.9305,-14.31174 35.24123,-25.33138 57.26521,-36.657365 20.20835,-10.866544 38.76397,-19.51919 66.52233,-27.308435 26.49869,-6.28541 56.29138,-15.635074 84.22636,-14.376005 20.15873,1.074414 37.95259,4.284582 18.83755,28.400939 -15.64481,17.740605 -41.83554,38.017656 -63.62032,48.586946 -32.14338,15.21457 -64.49289,33.94841 -99.14875,47.15727 -24.67828,9.95979 -43.74181,19.28522 -67.45956,27.28324 -28.08642,11.81884 -71.8446,21.82444 -65.72754,25.78012 20.16556,-2.10043 49.38913,-14.8326 66.36812,-18.62233 28.83963,-8.0881 54.06648,-13.0158 81.41958,-19.671 30.4937,-6.46064 61.70348,-11.33443 92.79666,-15.23457 36.72785,-7.77554 75.07699,-11.28778 112.50761,-13.29832 35.05067,-3.90516 69.9303,-10.6765 104.70158,-16.0102 22.77313,-2.89233 45.2328,-4.48673 67.69343,-8.39742 12.70507,-1.73578 21.14684,-2.00586 36.21209,-3.43945",
]

const drawVariant: Variants = {
  initial: { pathLength: 0, opacity: 0 },
  animate: (i: number) => ({
    pathLength: 1,
    opacity: 1,
    transition: {
      pathLength: {
        duration: i === 0 ? 2.5 : 1.5, // Path 1 is longer, Path 2 is faster
        delay: i === 0 ? 0 : 2.3, // Wait for Path 1 to nearly finish before starting Path 2
        ease: [0.4, 0, 0.2, 1],
      },
      opacity: { duration: 0.01, delay: i === 0 ? 0 : 2.3 },
    },
  }),
}

export const Signature = ({ className, ...props }: SVGMotionProps<SVGSVGElement>) => (
  <motion.svg
    aria-label="Signature"
    role="img"
    // Check your Inkscape viewBox! If it's different, update these 4 numbers.
    viewBox="0 0 1000 400"
    fill="none"
    stroke="currentColor"
    strokeWidth="6"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={cn('h-auto w-full drop-shadow-md', className)}
    initial="initial"
    animate="animate"
    {...props}
  >
    {PATHS.map((d, i) => (
      <motion.path
        key={`signature-path-${i}-${d}`}
        d={d}
        custom={i}
        variants={drawVariant}
      />
    ))}
  </motion.svg>
)